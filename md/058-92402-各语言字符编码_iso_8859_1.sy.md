---
show: step
version: 1.0
enable_checker: true
---

# 各语言字符编码

## 回忆上次内容

- 上次回顾了字型编码的进化过程
  - 从 7bits 到点阵字库
  - 终于让字母、数字、标点明确了字型
  - 字母包括英法两国的字母
- 法国这事儿算是过去了
	- 可以除了英法世界上还有好多的语言文字

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221103-1667484323213)

- 每个语言文字都会有一套字符集
- 这噩梦比法语不兼容更可怕！😱
- 这以后编码就越来越多了
- 不同语言认对方为乱码
- 这可怎么办呢？🤔


### ascii

- 目前最熟悉的编码是 `ascii`编码
	- 包括控制字符、大小写字符、数字、符号
	- `ascii` 有 7 位，从`0x00`-`0x7F`，第 `1` 位都为 `0`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210226-1614319542542)

- 但如果第 `1` 位是 `1` 
	- 又会如何呢？

### 尝试输出

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210226-1614320046951)

- 找到一个数字 0xa7
  - 找到他对应的字符
  - 这是一个章节符号
  - 也可以形成一个闭环

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220506-1651847784194)

- 这规律
	- 和ascii一样的
	- 也就是说这个字节里面除了 ascii 的 128 个字符之外
		- 还可以有一定的`空`间
		- 还可以对应更多字符
	- 等于是把ascii编码给扩展了

### 编码格式

- 跨国跨语言的事情怎么办？
	- 还是要看用户数量

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221022-1666407918722)

- Nec公司的VT100
	- 质量过硬
	- 价格实惠
	- 终成新一代机皇

### 机皇的影响力

- 新的机器就必须兼容VT100
- 包括VT100中的一项新功能

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221022-1666411585078)

- 这CSI不就是控制序列\e吗？

### 事实上的标准

- VT100是当时最流行的终端
	- 他不但支持了常用的转义字符
	- 还创造出了VT100控制码

```
\033[0m		// 关闭所有属性
\033[1m		// 设置为高亮
\033[4m		// 下划线
\033[5m		// 闪烁
\033[7m		// 反显
\033[8m		// 消隐
\033[nA		// 光标上移 n 行
\033[nB		// 光标下移 n 行
\033[nC		// 光标右移 n 行
\033[nD		// 光标左移 n 行
\033[y;xH	// 设置光标位置
\033[2J		// 清屏
```

- 这就是后来的CSI😁
	- Control Sequence Introducer
- 有了这个就可以控制
	- 字体
	- 位置
	- 颜色
- 慢慢DEC的VT100的标准
- 就成了计算机终端的标准

### ISO组织

- 总部在瑞士日内瓦湖的ISO组织
	- 负责跨国跨公司的标准化
	- 在Dec所使用的编码格式的基础上
		- 发展出了iso-8859-1字符集
- 为什么选择Dec的编码格式？
	- 因为VT100是当时的一代机皇
	- 用户数量就是事实上的标准

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651884034027)

- 根据dec公司的字符集
	- 扩展ascii字符集(charset)
	- 前一半(0-127)还是没有动
		- 还是ascii
	- 后面(128-255)换成了西欧各国的拉丁字符
	- 这个编码叫做iso-8859-1
	- 也叫做latin-1

- 西欧的问题就这样解决了
- 北欧、南欧的字符集怎么办呢？

### 欧洲拉丁字符集

- 其他各国照猫画虎也仿照这个方式
	- 只都改后一半
- 8859 就这样分出 16 个部分
	- 每种拼音文字都有自己的字符集

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210226-1614342965135)

- 这些字符集的大小都是1个字节
	- 但是从128到255号字符
	- 彼此都不一致
- 就导致了
	- 同一个字节
	- 不同编码方式
	- 对应不同的字符

### 不同编码解释

- 如果同样一个字节\xa1

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651905311985)

- 在欧洲不同部分对应的字符是不同的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210930-1633013818143)

- 突然能理解
	- 为什么使用拼音文字的欧洲分成好多国家
- 这才知道回来感谢我们的象形文字！
	- 画面 重视整体感
	- 声音 重视细微变化
- 在iso-8859这套方案中
	- 同一个字节通过不同的解码方式
	- 可以对应不同的字符
- 导致面对一系列的字节的时候
	- 不但要知道
		- 字节的状态
	- 更要知道
		- 字节所使用的编码方式

### 编码方式

- 计算机在显示文字的时候
	- 不但要知道具体的字节内容是什么
	- 而且要明确这些字节使用的编码方式是什么

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651884836556)

- 解铃换需系铃人
	- 否则就会出现乱码
- 扩展区的乱
	- 反而稳定了基础区的ascii字符

### 缘起性空

- 7bit 没有满
  - 所以字节中还能容纳其它的字符
  - 这样 ascii 就成为各种编码的基础
  - 位置更稳了
- 英文字符在哪里都能用
  - 就更成了世界语言了

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220515-1652606842396)

- 满招损 谦受益
  - 有之以为利 无之以为用
  - 性空才能缘起
  - 留白才有意境
  - 海纳百川 是因为够低

### 环境

- 当时的大环境是
	- 大型机逐渐没落
	- 个人电脑兴起
- 微软成为ibm兼容机时代最大的获利者
	- 从dos到windows
	- 几乎一统PC

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651879032593)

- iso8859系列的字符集
	- 又是如何被微软落实的呢？

### 选择

- 在iso-8859-1的基础上

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651884252118)

- 微软实现并扩展了这个标准
	- 把灰色区域填充了一些符号

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651884289282)

- 微软的CP1252编码
	- 支持了西欧的拉丁字符
	- 以牺牲其他地区字符的方式
	- 某种程度终结了欧洲的编码大战
- 可是世界上除了欧洲字符
  - 各种语言文字多了去了
  - 这编码规则的世界大战其实才刚刚开始！
- 毕竟使用象形文字的中日韩东亚文化圈
	- 字母数量20000+起

## 总结

- 这次回顾了非ascii的拉丁字符编码的进化过程
	- 0-127 是 ascii 的领域
- 世界各地编码分布
  - 拉丁字符扩展 ascii 共 16 种
	- 由iso组织制定
		- 从iso-8859-1
		- 到iso-8859-16
	- 无法同时显示俄文和法文
- 此时中日韩的文字也需要进入计算机
	- 象形文字的字符集超级巨大
	- 日本、韩国也用汉字
- 能把如此巨大的字符集编码进入计算机吗？🤔
- 我们下次再说！👋

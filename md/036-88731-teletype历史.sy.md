---
show: step
version: 1.0
enable_checker: true
---

# teletypewriter 历史

## 回忆上次内容

- 上次见到了一个真的机械打字机
	- 感受到了蒸汽朋克的时代背景
- 上上次区分了一些概念
  - `terminal`终端，电脑连线最终的端点
  - `TeleTYpewriter`，电传打印机，终端硬件
  - `shell`，终端硬件基础上的软件壳子
  - `Console` 控制台，直接连接主机的控制面板
- 换行和回车是两回事
  - 换行 对应字节`0x0A` 
	- Line-Feed 的意思是水平不动、垂直向上喂纸
	- 所以是`feed`
  - 回车 对应字节`0x0D` 
	- Carriage-Return 
	- 意思是让上图可移动的打印头
		- 好像可移动的四轮马车 Carriage)
	- 垂直不动、水平 `回`到纸张左侧 
	- 所以是`Return`
- 对于换行和回车，不同层面的理解
  - 电传打字机:两件事，经常一起干，但也可以分别干
  - 不同操作系统
    - unix-like：大家一起简化这个成`\n`，就步调一致就都好了
    - mac：为了避免麻烦，我和unix-like一致
    - windows：原来我用户多，定什么规矩我说了算,现在我还是随大流吧
  - python 解释器
    - 首先我觉得`unix-like`做得对
    - 不管在什么系统、什么架构上
    - 我把这个事统一
- 光说不练假把式
- 我能看看电传打字机吗？🤔
- 那这`0x0A`、`0x0D`谁规定的
- 来自于什么呢？

### 发明人

- `0x0A`、`0x0D`这两个字符来自于一套编码
	- 博多码(`Baudot code`)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210223-1614081948071)


- 为什么叫做博多码(`Baudot code`)呢？
	- 因为发明这个的人叫波多 Jean-Maurice-Émile `Baudot`
	- 从农民到电报操作员再到法国电报工程师
	- 他收到`Hughes`的启发,可见于[oeasy 电路 25 话](https://www.bilibili.com/video/BV1Es411Z7MH?p=25)
	- 发明了用一条线路传输`多个bit位`的通信系统

### 独特的按键和编码

- 这是最早发报的电键的样子
  - 5bits 的组合
  - 白色的有用
  - 可以传输`2`<sup>`5`</sup>种信号

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210223-1614082162708)

- 具体怎么分配编码呢？

### Baudot 编码

- 他设计了编码的方法
  - 后来他就申请了法国专利
  - 再后来申请了英国专利
- 我们今天所用的 `波特` 这个单位就是来源于他

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210223-1614082283082)

- 但是这种编码中只有字母
- 没有数字
- 怎么办呢？

### 挂档

- 他把字符分类两组
  - `Letter` 字符集主要存字母
  - `Figure` 字符集则主要是数字和符号

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210223-1614082485171)

- 通过一个标志位进行选择
	- 落实到一个档位
	- 最终就是选字符打字头哪组字模进行输出
	- 通过某个特定字符对应的切换机械上的字模档位
- 按一下就进行模式切换
	- `0b01000` 切到 数字符号组
	- `0b10000` 切到 字符组
- 这种思想来自于机械

### 档位

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220408-1649380843344)

- gear就是齿轮
	- 这种挂档的思想
	- 从蒸汽火车到电动汽车

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220408-1649380940404)

- 甚至今天的计算机
	- 一路这样下来

### 换挡键

- 今天的 caps lock 和 shift 是两种换挡方式

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220408-1649381068444)

- 这样`5bit` 就可以虚拟出 `6bit` 的效果
  - 但是需要一个字符来切换状态
  - 还需要约定最初的状态
  - 以及多长时间之后状态重制回默认
  - 这些其实是最早的`session`之类的东西
- 这种编码最终形成了`ITA1`编码

### 键盘

- 这也形成了 `qwer`键盘 的基本布局
	- 有字符、数字、符号
	- 控制字符
	  - BELL
	  - LINE FEED
	  - CAR RET
	  - FIGS
	  - LTRS

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210223-1614083402089)

- 在当时
  - 回车和换行还是两回事
  - 尤其在机械打字机上
- 打一个字符的速度快
  - 但由于是机械装置
  - 换行+回车的速度慢
  - 两个字符的时间有的时候都不够回车时间
  - 愣打的话位置漂浮不确定
- 往往多发一些空(Null)空延迟时间
  - 注意这个空(Null)不是空格(Space)
  - 空(Null)延迟时间却不打印内容
  - 等 carriage return 回来继续打印
- 电传打字机这个产品有什么经典机型么？

### ASR-33

- ASR-33是当时的一代机皇
	- Automatic Send-Receive

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221022-1666401458347)

- 可以看到当时的
	- io设备
		- 纸带
	- 标准输出流
	- 标准输入流
- 为什么当初为方便电报收发而生的电传打字机
- 会和电子计算机结合得这么紧密呢？

### unix时代

- 昂贵的主机时代
	- PDP-7小型机当年的价格为72000美元
	- GE-45大型机价格高达1000万美元
	- 这就是bell实验室想要开发multics的时代背景

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221022-1666401926491)

- 项目失败后
- 无所事事的两人
  - `Kenneth Thompson`
  - `Dennis Ritchie`
	- 希望能在 PDP 机器上继续玩`star travel`
- 于是制作了unix
	- 目标是做一个分时多用户系统
		- 分时意味着各个进程可以分享硬件资源
		- 多用户系统意味着要给每个用户配置一个终端
- 每个用户都要有
	- 一个显示器
	- 一个键盘
- 但当时所有的计算机设备(包括显示器)价格都非常昂贵
	- 而且键盘和主机是集成在一起的
	- 没有独立的键盘

- 最后他们找到了ASR33电传打字机
	- 电传打字机的用途是在电报线路上收发电报
	- 但是它也可以作为人与计算机的接口
	- 而且价格低廉
- 编码也随着机器的进化
	- 不断进化

### 编码的进化

- 在 ITA1 的基础上
	- 编码发生了进化
- 字符主要还是三类
  - 字符
  - 符号包括数字
  - 控制字符

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210223-1614083549476)

- 这些特殊字符在`ascii`时代还有吗？
	-  比如bel？
- 除了`\n`和`\r`之外还有什么样的控制字符吗？
	- 黑暗森林的神秘面纱感觉就要揭开了呢！

## 总结

- 我们回顾了`5bit-Baudot`博多码的来历
- 从莫尔斯码到博多码
- 原来
  - 人来收发电报
- 现在
	- 机器来收发电报
- 输入方式
	- 从电键
	- 改成键盘
- 输出方式
	- 从纸带
	- 变成打印纸张
- 后来
	- 电传打字机ASR-33
	- 成为计算机的初代经典终端
- 除了`\n`和`\r`之外
	- 还有什么样的特殊字符吗？🤔
		- 比如bell？🤔
- 我们下次再说！👋

---
show: step
version: 1.0
enable_checker: true
---

# 汉字字形码

## 回忆上次内容

- 简体和繁体的汉字
	- 字符数量都超级大
	- 感谢王选和陈堃銶等前辈发明了激光照排技术
	- 中文排版从此使用上了gb2312编码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672733999182)

- 纸张之外
	- 显示器是更先进的输出设备
- 计算机是如何在显示器上显示的呢？🤔

### 点阵字库

- 计算机显示的原理是
	- 通过具体的像素点
	- 亮或者暗来决定 
- 如果墙一面显示器
	- 那上面可以显示两个数字字符
	- 每个字符使用 3 * 5 像素点阵

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672734600971)

- 这些像素点被编码到字形码当中
	- 需要某个字的时候就显示这个字的字形码

### 英文字形码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672734768599)

- 英文字形相对简单
	- 最低使用 5 * 7 点阵就可以显示一个字符

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672737044860)

- LCD1602
	- 每行 16 个字符 
	- 总共 2 行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672735053185)

- 字形库并不是很大
- 计算机显示器呢？

### 显示系统

- 1981年的 IBM兼容机
	- 80 * 25 个字符
	- 每个字符 9 * 14 个像素
		- 经历了 `5*7`  -> `7*11` -> `9*14`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672737792985)

- 配一块专门的显卡
	- IBM Monochrome Display Adapter 
	- 可以输出到屏幕
	- 也可以输出到打印机

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672738646393)

- 字体叫做modern dos 

### 字型

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672738682387)

- 仔细看
	- 确实是9 * 14 的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672738690260)

- 右侧都会空两列

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672738697642)

- 这些字形存储在ROM中

### 显示适配器

- ROM 被放置在显卡上

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672738045566)

- 一般运行在文字模式
	- 按照字符进行渲染
	- 字符编码集 是 IBM的 ascii-exterded
	- 字型来自ROM
		- 9 * 14 * (255 - 0x20) / 8
		- 4K 足够了

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672739580039)

- 字形中有一些制表符
	- 可以显示表格效果
- 支持 VT-100控制序列 吗？

### 控制序列

- 只支持
	- 下划线
	- 加亮
	- 翻转
	- 隐藏

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672739895428)

- 可以魔改控制亮度吗？

### 魔改版

- 通过6/7两个管脚控制亮度

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672740151216)

- 总共四档亮度

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672739984546)

- 甚至把3/4/5管脚改成RGB

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672740218025)

- 虽然如此原始
	- 但也能玩游戏

### 文字冒险游戏

- 文字冒险类游戏
	- text adventures

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672740549154)

- 键盘输入指令
	- 走遍地图

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672740867226)

- 可以显示图形吗？

### 图形模式

- 理论分辨率 720×350
	- 但也仅仅只是理论
	- 没能对像素地址编码
	- 只能按照坑位填写字形

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672739473767)

- 描述图像
	- 靠的还是字符方式
	- 只能靠 asciiart

- 中文需要多少点阵才能显示字符呢？

### 中文点阵字库

- 中文点阵
	- 最小也需要 16 * 16 像素 

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672735217850)

- 目前的情况下
	- 想用 9 * 14 的点阵矩形
	- 去显示 16 * 16 的汉字字型
	- 无解...

### 转机

- 最新显卡 海格力斯(Hercules)  
	- 提供两种模式 
1. 文本模式
	- 80列 x 25行 
	- 9×14 点阵字型
	- 有效分辨率 720×350
2. 像素可寻址模式
	- 图形模式
	- 720×348

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672750492897)

- 第2种模式
	- 有Hack进去的可能

### 从打印机开始

- 原来的打印头
	- 字型定死
	- 通过旋转来选择

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672757038670)

- 针式打印机
	- 通过字库数据来驱动针头

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230103-1672757122901)

- 这样就可以打印中文了吗？



- 描述一个字形
	- 合 32 Byte


### 落地

- 当时电脑配件大多也是外国生产
	- IBM、微软、苹果、三星、日立、摩托等国外公司
	- 还有各种国内的攒ibm兼容机的公司
	- 在中国销售的计算机、复印机
	- 就都得遵从统一的汉字编码标准
- 就连BP机都有汉字显示功能了
- 这是当时巨大突破

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651913929710)

### 更大的液晶屏

- 12864内置
	- 8192个16*16点汉字字形
	- 128个16*8点ASCII字符集
	- 128*64点阵液晶模块

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221103-1667466372915)

- 中文字符是如何显示的呢？

### 中文字符原理

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221103-1667467006419)

- 甚至可以编码七位数码管的字形

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221103-1667466894225)


### 汉卡

- 汉卡
	- 存储字型库
	- 建立输入法

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221103-1667485277127)

- 提供联想功能
	- 于是有了联想公司
	- 广告语是
		- 人类失去联想
		- 世界将会怎样

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230106-1673010713492)

### 操作系统加入中文

- 把原始的DOS改成中文的DOS
	- CCDOS
	- UcDos

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221103-1667485843089)

- 严援朝CCDOS
	- 一个命令行的排版软件
	- 这方面的软件被后来求伯君的wps所掩埋
- 求伯君wps
	- 又被微软的捆绑和盗版策略所掩埋
	- wps后金山做游戏、杀毒
- 鲍岳桥、简晶
	- 做出了ucdos
	- 后来制作联众
	- 被腾讯收购
	- 成了qq游戏大厅



- 标准定了立刻就能用起来么？

### 过程

- 凡事都有个过程
	- 95年定的gbk
	- 98年才逐渐推行开来
- 但还是有些生僻字没有相应的字型

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651896795747)

- 内码从无到有
	- 字形码也从无到有

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651896893908)


- 台湾同胞又是怎么做的呢？

### 中国台湾地区

- BIG5 码
  - 收录的原则和次序首先是频率
  - 然后是笔画数
  - 然后是康熙字典
  - 是由 5 个公司联合制作的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211004-1633338342580)

- 同时用 BIG5 编码和解码也是没有问题的
	- 但如果用BIG5编码 
	- 却用gb2312解码就会有问题
	- 解铃不用系铃人可还行？😠
- 不过存储的内容在文件里
	- 系统不知道用什么解码时
	- 默认自动会用 gb2312 解码
	- 这就造成了自动乱码

### 麻烦形成

- 但是如果用BIG5编码 
	- 却用gb2312解码就会有问题

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211004-1633338342580)

### 反之亦然

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211004-1633338216226)

- 我们用 gb2312 编码的文字
	- 用 gb2312 可以打开
	- 但是用 BIG5 打开就是乱码
	- 也需要转化
- 转化工具是有的
	- 能解决问题但很麻烦
	- 大量的输入输出编码解码的问题
	- 令人头大

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651888237559)
 
- 确实麻烦

### 解决办法

- 麻烦的地方正是机会所在

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210226-1614345329218)

- 当时如果日文游戏或者台湾地区的游戏不能玩
	- 可能是因为字符编码格式不一致
	- 可以用南极星调整字符编码格式
	- 把不同编码格式进行转化
	- 把字节按照正确的方式进行解码
	- 就可以玩啦

- 没有个标准整合一下吗？

### GBK

- GBK 即汉字内码扩展规范
	- 在GB2312的基础上扩展了繁体字符集
	- K 为汉语拼音 Kuo Zhan（扩展）中“扩”字的声母
	- 英文全称 Chinese Internal Code Specification
	- 最初是微软搞的
	- 虽然不是国家标准
	- 却是事实上的技术规范

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221012-1665541087518)

- 共收入 21886 个汉字和图形符号
	- GB 2312 中的全部汉字、非汉字符号
	- BIG5 中的全部汉字(繁体兼容 GBK1)
	- 将 汉字、日本汉字、朝鲜汉字融合了
	- 合计 20902 个汉字


- 但是还是有问题

### 问题

- GBK虽然兼容了BIG5 中的全部汉字
	- 但是无法兼容编码
	- 用GBK打开BIG5编码的文件还是乱码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651889307438)

- 如果新GBK兼容了BIG5编码
	- 就无法向前兼容gb2312
- 这无解了吗？
	- 时间自会给我们答案
	- 老天自有安排！

## 总结

- 中国的简体和繁体汉字
	- 字符数量都超级大
	- 彼此还认对方为乱码
- 如果有一种编码所有的字符都能编进去就好了
  - 中日韩(CJK)
  - 简体繁体
  - 欧洲各种拼音
  - 梵文
  - 阿拉伯文
  - 等等等都包括进去

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221120-1668910380061)

- 能有么？🤔
- 我们下次再说！👋
